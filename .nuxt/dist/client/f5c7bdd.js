(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{409:function(t,e,n){var content=n(418);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(38).default)("5f6df67f",content,!0,{sourceMap:!1})},417:function(t,e,n){"use strict";n(409)},418:function(t,e,n){var o=n(37)((function(i){return i[1]}));o.push([t.i,".ck-editor__editable{min-height:200px}",""]),o.locals={},t.exports=o},440:function(t,e,n){"use strict";n.r(e);n(4),n(66);var o=n(23),r=(n(62),n(1),n(11),n(50),n(185),n(3),n(53),{layout:"admin",head:function(){return{title:"Tambah Post - RPLSmart - Belajar Koding Bahasa Indonesia Terlengkap"}},components:{"ckeditor-nuxt":function(){return n.e(0).then(n.t.bind(null,427,7))}},data:function(){return{post:{image:"",title:"",category_id:"",content:"",description:"",tags:[]},categories:[],tags:[],validation:[],editorConfig:{removePlugins:["Title"],simpleUpload:{uploadUrl:"https://belajar.sinaukode.my.id/api/web/posts/storeImage"}}}},mounted:function(){var t=this;this.$axios.get("/api/admin/categories").then((function(e){t.categories=e.data.data.data})),this.$axios.get("/api/admin/tags").then((function(e){t.tags=e.data.data.data}))},methods:{handleFileChange:function(t){(this.post.image=t.target.files[0]).type.match("image.*")||(t.target.value="",this.post.image=null,this.$swal.fire({title:"OOPS!",text:"Format File Tidak Didukung!",icon:"error",showConfirmButton:!1,timer:2e3}))},storePost:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.post.tags,o=[],n.forEach((function(t){o.push(t.id)})),(r=new FormData).append("image",t.post.image),r.append("title",t.post.title),r.append("category_id",t.post.category_id?t.post.category_id.id:""),r.append("content",t.post.content),r.append("description",t.post.description),i=0;i<o.length;i++)r.append("tags[]",o[i]);return e.next=12,t.$axios.post("/api/admin/posts",r).then((function(){t.$swal.fire({title:"BERHASIL!",text:"Data Berhasil Disimpan!",icon:"success",showConfirmButton:!1,timer:2e3}),t.$router.push({name:"admin-post"})})).catch((function(e){t.validation=e.response.data}));case 12:case"end":return e.stop()}}),e)})))()}}}),l=(n(417),n(36)),component=Object(l.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper mb-5"},[t._m(0),t._v(" "),e("section",{staticClass:"content"},[e("div",{staticClass:"card card-outline card-info"},[t._m(1),t._v(" "),e("div",{staticClass:"card-body"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.storePost.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",[t._v("GAMBAR POST")]),t._v(" "),e("input",{staticClass:"form-control",attrs:{type:"file"},on:{change:t.handleFileChange}}),t._v(" "),t.validation.image?e("div",{staticClass:"mt-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.validation.image[0]))])],1):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("JUDUL POST")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Masukkan Judul Post"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}}),t._v(" "),t.validation.title?e("div",{staticClass:"mt-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.validation.title[0]))])],1):t._e()]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("CATEGORY")]),t._v(" "),e("multiselect",{attrs:{options:t.categories,label:"name","track-by":"id",searchable:!0},model:{value:t.post.category_id,callback:function(e){t.$set(t.post,"category_id",e)},expression:"post.category_id"}}),t._v(" "),t.validation.category_id?e("div",{staticClass:"mt-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.validation.category_id[0]))])],1):t._e()],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("KONTEN POST")]),t._v(" "),e("client-only",{attrs:{placeholder:"loading..."}},[e("ckeditor-nuxt",{attrs:{config:t.editorConfig},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),t._v(" "),t.validation.content?e("div",{staticClass:"mt-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.validation.content[0]))])],1):t._e()],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("TAGS")]),t._v(" "),e("multiselect",{attrs:{options:t.tags,label:"name","track-by":"id",multiple:!0,searchable:!0},model:{value:t.post.tags,callback:function(e){t.$set(t.post,"tags",e)},expression:"post.tags"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",[t._v("DESCRIPTION")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.description,expression:"post.description"}],staticClass:"form-control",attrs:{rows:"3",placeholder:"Masukkan Deskripsi Singkat"},domProps:{value:t.post.description},on:{input:function(e){e.target.composing||t.$set(t.post,"description",e.target.value)}}}),t._v(" "),t.validation.description?e("div",{staticClass:"mt-2"},[e("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.validation.description[0]))])],1):t._e()]),t._v(" "),t._m(2),t._v(" "),t._m(3)])])])])])}),[function(){var t=this._self._c;return t("section",{staticClass:"content-header"},[t("div",{staticClass:"container-fluid"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header"},[e("h3",{staticClass:"card-title"},[e("i",{staticClass:"nav-icon fas fa-book-open"}),t._v(" TAMBAH POST\n        ")]),t._v(" "),e("div",{staticClass:"card-tools"},[e("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"collapse",title:"Collapse"}},[e("i",{staticClass:"fas fa-minus"})]),t._v(" "),e("button",{staticClass:"btn btn-tool",attrs:{type:"button","data-card-widget":"remove",title:"Remove"}},[e("i",{staticClass:"fas fa-times"})])])])},function(){var t=this._self._c;return t("button",{staticClass:"btn btn-info mr-1 btn-submit",attrs:{type:"submit"}},[t("i",{staticClass:"fa fa-paper-plane"}),this._v(" SIMPAN\n          ")])},function(){var t=this._self._c;return t("button",{staticClass:"btn btn-warning btn-reset",attrs:{type:"reset"}},[t("i",{staticClass:"fa fa-redo"}),this._v(" RESET\n          ")])}],!1,null,null,null);e.default=component.exports}}]);